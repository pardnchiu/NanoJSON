!function(){const t=window,e=document,i=String,n=Number,s=Boolean,o=Array,l=Object,r=(DocumentFragment,Blob),a=URL,h=Math,c=Date,d=setTimeout,f=JSON,u=confirm,p=parseFloat,v=isNaN,w=FileReader,g=File,y=fetch,b=Promise,m=/\.([\w_-]+)?/gi,A=/\#([\w_-]+)?/i,C=/^\w+(?=[\#\.]*)/i,k="then",x="click",j="parse",H="true",z="false",$="add",F="appendChild",M="class",V="section",S="key",N="stringify",O="label",L="target",T="color",B="fill",D="insert",R="createDocumentFragment",E="contentEditable",U="replaceChildren",J="toLowerCase",I="beforeRender",P="beforeUpdate",_="beforeDestroy",q="rendered",G="updated",K="button",Y="destroyed",Q="type",W="script",X="createTextNode",Z="console",tt="onchange",et="oninput",it="body",nt="apply",st="src",ot="void",lt="title",rt="error",at="now",ht="render",ct="remove",dt="dataset",ft="display",ut="float",pt="dom",vt="input",wt="textarea",gt="height",yt="img",bt="parent",mt="onclick",At="inner",Ct="isArray",kt="length",xt="map",jt="match",Ht="number",zt="object",$t="replace",Ft="keys",Mt="placeholder",Vt="source",St="style",Nt="string",Ot="selected",Lt="option",Tt="temp",Bt="test",Dt="textContent",Rt="trim",Et="update",Ut="value",Jt="width",It="collapsed",Pt="array",_t="boolean",qt="reset",Gt="import",Kt="export",Yt="children",Qt="push",Wt="editor",Xt="getElementById",Zt="nextElementSibling",te="link",ee="rel",ie="href",ne="as",se="backgroundColor",oe=M+"List",le="createElement",re="hasOwnProperty",ae="indexOf",he=At+"HTML",ce=At+"Text",de="setAttribute",fe=[Nt,Ht,_t,Pt,zt],ue="https://cdn.jsdelivr.net/npm/@pardnchiu/nanojson@0.3.1/dist/NanoJSON.css",pe="NanoJSON\nGitHub: https://github.com/pardnchiu/NanoJSON\nCreator: Pardn Chiu\nLicense: Proprietary",ve={[I]:I,[P]:P,[_]:_,[q]:q,[G]:G,[Y]:Y};for(let t of[me(te,{[ee]:"preconnect",[ie]:"https://cdn.jsdelivr.net"}),me(te,{[ee]:"preload",[ie]:ue,[ne]:St}),me(te,{[ee]:"stylesheet",[ie]:ue})])e.head[F](t);document.addEventListener("DOMContentLoaded",(t=>{$e("%c"+pe,"line-height: 1.75rem; font-size: 0.875rem;")}));const we={number:'<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M5.5 15v-4.5H4V9h3v6H5.5zM9 15v-2.5c0-.283.096-.52.287-.713A.967.967 0 0110 11.5h2v-1H9V9h3.5c.283 0 .52.096.713.287.191.192.287.43.287.713v1.5c0 .283-.096.52-.287.713a.968.968 0 01-.713.287h-2v1h3V15H9zm6 0v-1.5h3v-1h-2v-1h2v-1h-3V9h3.5c.283 0 .52.096.712.287.192.192.288.43.288.713v4c0 .283-.096.52-.288.713A.968.968 0 0118.5 15H15z" fill="#5F6368"/></svg>',string:'<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17 15a.968.968 0 01-.712-.287A.968.968 0 0116 14v-4c0-.283.096-.52.288-.713A.968.968 0 0117 9h3c.283 0 .52.096.712.287.192.192.288.43.288.713v1h-1.5v-.5h-2v3h2V13H21v1c0 .283-.096.52-.288.713A.968.968 0 0120 15h-3zm-7.5 0V9h4c.283 0 .52.096.713.287.191.192.287.43.287.713v1c0 .283-.096.52-.287.713A.968.968 0 0113.5 12c.283 0 .52.096.713.287.191.192.287.43.287.713v1c0 .283-.096.52-.287.713A.968.968 0 0113.5 15h-4zm1.5-3.75h2v-.75h-2v.75zm0 2.25h2v-.75h-2v.75zM3 15v-5c0-.283.096-.52.288-.713A.968.968 0 014 9h3c.283 0 .52.096.713.287.191.192.287.43.287.713v5H6.5v-1.5h-2V15H3zm1.5-3h2v-1.5h-2V12z" fill="#5F6368"/></svg>',object:'<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13.5 18v-1.5h2.25c.213 0 .39-.072.534-.216a.726.726 0 00.216-.534v-1.5c0-.475.137-.906.413-1.294A2.233 2.233 0 0118 12.131v-.262a2.233 2.233 0 01-1.087-.825A2.184 2.184 0 0116.5 9.75v-1.5a.726.726 0 00-.216-.534.726.726 0 00-.534-.216H13.5V6h2.25a2.17 2.17 0 011.594.656c.437.438.656.969.656 1.594v1.5c0 .213.072.39.216.534a.726.726 0 00.534.216h.75v3h-.75a.726.726 0 00-.534.216.726.726 0 00-.216.534v1.5a2.17 2.17 0 01-.656 1.594A2.17 2.17 0 0115.75 18H13.5zm-5.25 0a2.17 2.17 0 01-1.594-.656A2.17 2.17 0 016 15.75v-1.5a.726.726 0 00-.216-.534.726.726 0 00-.534-.216H4.5v-3h.75c.213 0 .39-.072.534-.216A.726.726 0 006 9.75v-1.5c0-.625.219-1.156.656-1.594A2.17 2.17 0 018.25 6h2.25v1.5H8.25a.726.726 0 00-.534.216.726.726 0 00-.216.534v1.5c0 .475-.138.906-.412 1.294A2.233 2.233 0 016 11.869v.262c.45.163.813.438 1.088.825.274.388.412.819.412 1.294v1.5c0 .213.072.39.216.534a.726.726 0 00.534.216h2.25V18H8.25z" fill="#5F6368"/></svg>',array:'<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M14.625 19v-1.75h2.625V6.75h-2.625V5H19v14h-4.375zM5 19V5h4.375v1.75H6.75v10.5h2.625V19H5z" fill="#5F6368"/></svg>',boolean:'<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M7.91 16.818c-1.365 0-2.524-.477-3.478-1.432C3.477 14.432 3 13.273 3 11.91c0-1.364.477-2.523 1.432-3.477C5.386 7.477 6.545 7 7.909 7h8.182c1.363 0 2.523.477 3.477 1.432.955.954 1.432 2.114 1.432 3.477 0 1.364-.477 2.523-1.432 3.477-.954.955-2.114 1.432-3.477 1.432H7.909zm0-1.636h8.18c.9 0 1.671-.32 2.312-.962.641-.64.962-1.41.962-2.31 0-.9-.32-1.671-.962-2.312a3.151 3.151 0 00-2.311-.962H7.909c-.9 0-1.67.32-2.311.962a3.151 3.151 0 00-.962 2.311c0 .9.32 1.67.962 2.311.64.641 1.411.962 2.311.962zm8.18-.818c.683 0 1.262-.239 1.74-.716a2.367 2.367 0 00.716-1.739c0-.682-.24-1.261-.716-1.739a2.367 2.367 0 00-1.74-.715c-.68 0-1.26.238-1.738.716a2.367 2.367 0 00-.716 1.738c0 .682.239 1.261.716 1.739a2.367 2.367 0 001.739.716z" fill="#5F6368"/></svg>',right:'<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M10 18V6l6 6-6 6z" fill="#5F6368"/></svg>',folder:'<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 20c-.55 0-1.02-.196-1.413-.587A1.926 1.926 0 012 18V6c0-.55.196-1.02.587-1.412A1.926 1.926 0 014 4h6l2 2h8c.55 0 1.02.196 1.413.588.391.391.587.862.587 1.412H11.175l-2-2H4v12l2.4-8h17.1l-2.575 8.575a1.95 1.95 0 01-.738 1.038A1.985 1.985 0 0119 20H4zm2.1-2H19l1.8-6H7.9l-1.8 6z" fill="#5F6368"/></svg>',add:'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><path d="M11 13H5v-2h6V5h2v6h6v2h-6v6h-2v-6z" fill="#5F6368"/></svg>',download:'<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 16l-5-5 1.4-1.45 2.6 2.6V4h2v8.15l2.6-2.6L17 11l-5 5zm-6 4c-.55 0-1.02-.196-1.412-.587A1.926 1.926 0 014 18v-3h2v3h12v-3h2v3c0 .55-.196 1.02-.587 1.413A1.926 1.926 0 0118 20H6z" fill="#5F6368"/></svg>',clear:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M17.25 18H22v2h-6.75l2-2zm-12.5 2l-2.125-2.125c-.383-.383-.58-.858-.587-1.425-.009-.567.179-1.05.562-1.45l11-11.4c.383-.4.854-.6 1.412-.6.559 0 1.03.192 1.413.575L21.4 8.55c.383.383.575.858.575 1.425 0 .567-.192 1.042-.575 1.425L13 20H4.75zm7.4-2L20 9.95 15.05 5 4 16.4 5.6 18h6.55z" fill="#5F6368"/></svg>'};function ge(t={}){let e;if(typeof t===zt&&t[re](pt)){e=t[pt];for(let i of l[Ft](t))i!==pt&&(e[i]=e=>t[i](e));return e}}function ye(t,e,i){if({[zt]:1,[Pt]:1}[t[Q][J]()]&&!t[It])return me(V,{[M]:"pd-json-editor-nested-child"},[...t[Yt][xt](((t,i)=>e(t,i))),ge({[pt]:me(K,we[$]),[mt]:i})])}function be(t,e){const i={[zt]:1,[Pt]:1}[t[Q][J]()],n=ge({[pt]:me("button",i?we.right:null),[mt]:i?i=>{t[It]=!t[It],e[ht]()}:t=>{}});return n[dt].collapseable=i?1:0,n[dt][It]=t[It]?1:0,n}function me(t="",i,n){const s=((t[jt](C)||[])[0]||"")[Rt](),o=((t[jt](A)||[])[1]||"")[Rt](),l=(m[Bt](t)?t[jt](m):[])[xt]((t=>t[$t](/^\./,"")));if(s[kt]<1)return;let r,a,h,c=!1;if(t===Tt?(c=!0,r=e[R]()):r=e[le](s),95!=pe[kt])return r;o[kt]&&(r.id=o);for(let t of l)r[oe][$](t);if(null==i&&null!=n&&([i,n]=[n,null]),null!=i&&null!=n)[a,h]=[i,n];else if(null==n)typeof i===Nt||typeof i===Ht||Array[Ct](i)?h=i:a=i;else if(null==i)return r;if(typeof a===zt&&null!=a)for(const t in a){if(!a[re](t))continue;const e=a[t];-1!=[Ut,ce,he,Dt,E][ae](t)?r[t]=e:-1!=[T,se,Jt,gt,ft,ut][ae](t)?r[St][t]=e:null!=e&&r[de](t,e)}if(null!=h){const t=typeof h===Nt,i=typeof h===Ht,n=Array[Ct](h);if(t||i){const t=h,i=s===vt,n=s===wt;s===yt||s===Vt?r[st]=t:n||i?r[Ut]=t:c?r[F](e[X](h)):r[he]=t}else if(n)for(let t of h){const i=t instanceof Element;typeof t===Nt||typeof t===Ht?c?r[F](e[X](t)):r[he]+=t:i&&r[F](t)}}return r}function Ae(t,e,i,n){function s(t){return t[$t](/\n/g,"")}function o(e){const i=e[L];i[Ut]=i[Zt][he]=s(i[Ut]),t[S]=s(i[Ut])[Rt]()}return i?me("span.array-index",`${e}`):me("label",[ge({[pt]:me("textarea#key-"+t.id,{[Mt]:"KEY"},t[S][$t](/\n/g,"")),[et]:t=>{o(t),n[Et]((()=>{}))},[tt]:t=>{o(t)}}),me("pre",s(t[S]))])}function Ce(t,e){return ge({[pt]:me(K,we[$]),[mt]:i=>{u("Remove?")&&(t[ct](),e[ht](!0))}})}function ke(t,i){return me("label",[t[Q][J]()===Ht?we[Ht]:t[Q][J]()===_t?we[_t]:t[Q][J]()===Pt?we[Pt]:t[Q][J]()===zt?we[zt]:we[Nt],ge({[pt]:me("select",fe[xt]((e=>me(Lt,{[Ut]:e,[Ot]:e===t[Q]?"":null},e)))),[tt]:n=>{t[Q]=n[L][Ut];if({[zt]:1,[Pt]:1}[n[L][Ut][J]()])t[Ut]="",0===t[Yt][kt]&&t[$]();else if(n[L][Ut][J]()===Ht){const e=p(t[Ut]);t[Ut]=v(e)?"":e}else t[Ut]="",t[Yt]=[];i[ht](!0),e[Xt]("value-"+t.id).focus()}})])}function xe(t,e){if(t[Q][J]()===Ht){const o=/[^\d\-\.]/g,l=p(t[Ut]);function n(t){return v(t)?"":i(t)[$t](/\s/g,"")[$t](o,"")}return me(O,[ge({[pt]:me("textarea#value-"+t.id,{[Mt]:"NUM"},n(l)),[et]:i=>{const s=i[L];s[Ut]=s[Zt][he]=n(s[Ut]),t[Ut]=n(s[Ut]),e[Et]((()=>{}))},[tt]:e=>{const i=e[L];i[Ut]=i[Zt][he]=n(i[Ut]),t[Ut]=n(i[Ut])}}),me("pre",n(l))])}if(t[Q][J]()===_t)return ge({[pt]:me("select#value-"+t.id,[me(Lt,{[Ut]:H,[Ot]:t[Ut]?"":null},H),me(Lt,{[Ut]:z,[Ot]:t[Ut]?null:""},z)]),[tt]:i=>{t[Ut]=i[L][Ut],e[Et]((()=>{}))}});{const r={[zt]:1,[Pt]:1}[t[Q][J]()];function s(t){return t[$t](/\n/g,"<br>")}return me(O,{display:r?"none":"block"},[ge({[pt]:me("textarea#value-"+t.id,{[Mt]:"VAL"},t[Ut]),[et]:i=>{const n=i[L];n[Zt][he]=s(n[Ut]),t[Ut]=n[Ut],e[Et]((()=>{}))},[tt]:e=>{const i=e[L];i[Zt][he]=s(i[Ut]),t[Ut]=i[Ut]}}),me("pre",s(t[Ut]))])}}function je(t){return new b((async(e,i)=>{if(null!=t)if(t instanceof g){const i=new w;i.onload=i=>{try{e(f[j](i[L].result))}catch(i){ze(`Failed to parse JSON from file ${t.name}: ${i}`),e({})}},i.readAsText(t)}else typeof t===zt?e(t):typeof t===Nt?await y(t)[k]((t=>t.text()))[k]((t=>{try{e(f[j](t))}catch(t){throw t}})).catch((i=>{ze(`Failed to fetch data from ${t}: ${i}`),e({})})):(ze(`Invalid data type: ${t} (${typeof t})`),e({}));else e({})}))}function He(t){return o[Ct](t)?Pt:typeof t===zt?zt:typeof t===_t?_t:typeof t===Ht?Ht:Nt}new Map;function ze(...t){const i=me(W,`${Z}.${rt}.${nt}(${ot} 0, ${f[N](t)});`);e[it][F](i),i[ct]()}function $e(...t){const i=me(W,`${Z}.log.${nt}(${ot} 0, ${f[N](t)});`);e[it][F](i),i[ct]()}t.JSONEditor=class{children=[];body;editor;button=[];#t;#e=!1;#i="Object";get type(){return this.#i}constructor(t={}){"object"==typeof t?this.#n(t):ze("Failed to load config.")}async#n(t={}){this[Wt]=me("section");const i=t.when??{},n=t[lt]??"",o=t.description??"",l=s(null==t[B]?1:t[B])?1:0;let r=null!=t[K]&&typeof t[K]===zt?t[K]:{[Gt]:1,[Kt]:1,[qt]:1};r[qt]=r[qt]??1,r[Gt]=r[Gt]??1,r[Kt]=r[Kt]??1;let a=await je(t.file??t.json??t.path);this.children=this.#s(a),this.#t=new Me({[I]:i[ve[I]],[q]:i[ve[q]],[P]:i[ve[P]],[G]:i[ve[G]],[_]:i[ve[_]],[Y]:i[ve[Y]]});let h=me("temp",[Math.max(n[kt],o[kt])>0?me("header",[n[kt]>0?me("strong",n):null,o[kt]>0?me("p",o):null]):null,this[Wt],me("footer",[ge({[pt]:me(K,{[lt]:"Add row"},we[$]),[mt]:t=>this[D]()}),s(r[Gt])?ge({[pt]:me(K,{[lt]:"Open file"},we.folder),[mt]:t=>t[L][Zt][x]()}):null,s(r[Gt])?ge({[pt]:me(vt,{[Q]:"file",accept:".json",[ft]:"none"}),[tt]:t=>this[Gt](t[L].files[0])}):null,s(r[Kt])?ge({[pt]:me(K,{[lt]:"Download file"},we.download),[mt]:t=>{u("Download?")&&this[Kt]()}}):null,s(r[qt])?ge({[pt]:me(K,{[lt]:"清空"},we.clear),[mt]:t=>{u("Reset?")&&this[Gt]({})}}):null])]);const c="pd-json-editor";null==t.id?(this[it]=me(V+"."+c),this[it][F](h)):(this[it]=e[Xt](t.id),this[it][oe][$](c),this[it][U](...h[Yt])),this[it][dt][B]=l,this[D](),this.#t[ht]((async()=>{this[ht](),this.#e=!0}))}#o(t,e,i=0,n=!1){return me("section.pd-json-editor-child",[me("section.pair-wrapper",[me(V+"#"+t.id+".input-group",[be(t,this),Ae(t,e,n,this.#t),me("span",":"),ke(t,this),xe(t,this.#t),Ce(t,this)]),ye(t,((e,n)=>{let s=this.#o(e,n,i+1,t[Q]===Pt);return s[dt].last=n===t[Yt][kt]-1?1:0,s}),(e=>{t.add(),this[ht]()}))])])}#s(t,e=null){const n=[];if(o[Ct](t))for(let s of t){const t=He(s),o=new Fe({[Q]:t,[bt]:e??this});t===zt&&null!=s||t===Pt?o[Yt]=this.#s(s,o):o[Ut]=i(s),n[Qt](o)}else for(const[s,o]of l.entries(t)){const t=He(o),l=new Fe({[S]:s,[Q]:t,[bt]:e??this});t===zt&&null!=o||t===Pt?l[Yt]=this.#s(o,l):l[Ut]=null==o?"":i(o),n[Qt](l)}return n}render(t=!1){let e=me("temp",this[Yt].map(((t,e)=>this.#o(t,e))));this[Wt][U](...e[Yt]),this.#e&&t&&this.#t[Et]((()=>{}))}insert(){this[Yt][Qt](new Fe({[bt]:this})),this[ht]()}get json(){const t={};for(let e of this[Yt])e[S]&&(t[e[S]||0]=e.json);return f[N](t,null,4)}async import(t){let e=await je(t);this.children=this.#s(e),this[ht](!0)}reset(){this[Gt]({})}export(){const t={};this[Yt].forEach((e=>{(e.key||1===this[Yt][kt])&&(t[e.key||0]=e.json)}));const i=new r([f[N](t,null,4)],{[Q]:"application/json"}),n=a.createObjectURL(i),s=me("a",{href:n,download:`JSONEditor-${c[at]()}.json`});e[it][F](s),s[x](),e[it].removeChild(s),a.revokeObjectURL(n)}};class Fe{key="";type="String";value="";parent=null;children=[];collapsed=!1;constructor(t={}){"object"==typeof t?(this.id=function(t=64){let e="";for(let i=0;i<t;i++)e+="abcdefghijklmnopqrstuvwxyz0123456789".charAt(h.floor(36*h.random()));return e}(),this[S]=t[S]??this[S],this[Q]=t[Q]??this[Q],this[Ut]=t[Ut]??this[Ut],this[bt]=t[bt]??this[bt],this[Yt]=t[Yt]??this[Yt],this[It]=t[It]??this[It]):ze("Failed to load config form editor node.")}add(){this.#l()}remove(){this.#r()}get json(){return this.#a()}#l(){this[Yt][Qt](new Fe({[bt]:this}))}#r(){if(!this[bt])return;const t=this[bt][Yt][ae](this);-1!==t&&this[bt][Yt].splice(t,1)}#a(){if(!this[bt])return;if(this[Q]===Pt)return this[Yt][xt]((t=>t.#a()));if(this[Q]===zt){const t={};for(let e of this[Yt])(e[S]||this[bt][Q]===Pt)&&(t[e[S]||l[Ft](t)[kt]]=e.#a());return t}let t=this[Ut];return this[Q]===_t?t="true"===t[J]():this[Q]===Ht&&(t=n(t)),t}}class Me{#h;#c;#d;#f;#u;#p;#v;#w;#g;constructor(t={}){this.#h=t[ve[I]]||void 0,this.#c=t[ve[q]]||void 0,this.#d=t[ve[P]]||void 0,this.#f=t[ve[G]]||void 0,this.#u=t[ve[_]]||void 0,this.#p=t[ve[Y]]||void 0}async#y(t){return new b(((e,i)=>{e(!1!==t())}))}#b(t){t(!1)}async render(t){this.#v=c[at](),null!=this.#h&&!1===await this.#y(this.#h)||(await t(),this.#w=c[at]()-this.#v,$e(`Rendered in ${this.#w}ms.`),null!=this.#c&&this.#b(this.#c))}async update(t){clearTimeout(this.#g),this.#g=d((async()=>{this.#v=c[at](),null!=this.#d&&!1===await this.#y(this.#d)||(await t(),this.#w=c[at]()-this.#v,$e(`Updated in ${this.#w}ms.`),null!=this.#f&&this.#b(this.#f))}),300)}async destroy(t){this.#v=c[at](),null!=this.#u&&!1===await this.#y(this.#u)||(await t(),this.#w=c[at]()-this.#v,$e(`Destroyed in ${this.#w}ms.`),null!=this.#p&&this.#b(this.#p))}}}("undefined"==typeof window?window={}:window);export const JSONEditor = window.JSONEditor;
