!function(){const e=window,t=document,n=Object,r=Number,o=Boolean,i=(DocumentFragment,Math),s=/\.([\w_-]+)?/gi,l=/\#([\w_-]+)?/i,a=/^\w+(?=[\#\.]*)/i,c="add",p="appendChild",d="color",h="createDocumentFragment",u="contentEditable",y="replaceChildren",f="type",b="script",g="console",m="body",j="apply",O="void",w="remove",N="display",v="float",k="dom",A="input",S="textarea",C="height",x="img",T="parent",L="inner",B="isArray",E="length",J="map",M="match",_="number",R="object",H="replace",F="source",I="style",$="string",D="temp",U="test",z="textContent",P="trim",G="value",K="width",V="Array",q="children",Q="editor",W="getElementById",X="nextElementSibling",Y="link",Z="rel",ee="preconnect",te="href",ne="crossOrigin",re="preload",oe="as",ie="anonymous",se="backgroundColor",le="classList",ae="createElement",ce="hasOwnProperty",pe="indexOf",de=L+"HTML",he=L+"Text",ue="setAttribute",ye=["String","Array","Boolean","Number","Object"],fe="https://fonts.googleapis.com",be=fe+"/css2?family=Roboto+Mono:wght@400&family=Noto+Sans+TC:wght@400&display=swap",ge=fe+"/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0&display=swap",me="https://cdn.jsdelivr.net/npm/@pardnchiu/nanojson@0.1.4/dist/NanoJSON.css",je="NanoJSON\nGitHub: https://github.com/pardnchiu/NanoJSON\nCreator: Pardn Chiu\nLicense: Proprietary";for(let e of[we(Y,{[Z]:ee,[te]:"https://fonts.gstatic.com",[ne]:""}),we(Y,{[Z]:ee,[te]:fe,[ne]:""}),we(Y,{[Z]:re,[te]:be,[oe]:I,[ne]:ie}),we(Y,{[Z]:"stylesheet",[te]:be}),we(Y,{[Z]:re,[te]:ge,[oe]:I,[ne]:ie}),we(Y,{[Z]:"stylesheet",[te]:ge}),we(Y,{[Z]:"preconnect",[te]:"https://cdn.jsdelivr.net"}),we(Y,{[Z]:re,[te]:me,[oe]:I}),we(Y,{[Z]:"stylesheet",[te]:me})])t.head[p](e);function Oe(e={}){let t;if("object"==typeof e&&e[ce]("dom")){t=e.dom;for(let n of Object.keys(e))"dom"!==n&&(t[n]=t=>e[n](t));return t}}function we(e="",n,r){const o=((e[M](a)||[])[0]||"")[P](),i=((e[M](l)||[])[1]||"")[P](),y=(s[U](e)?e[M](s):[])[J]((e=>e[H](/^\./,"")));if(o[E]<1)return;let f,b,g,m=!1;if(e===D?(m=!0,f=t[h]()):f=t[ae](o),95!=je[E])return f;i[E]&&(f.id=i);for(let e of y)f[le][c](e);if(null==n&&null!=r&&([n,r]=[r,null]),null!=n&&null!=r)[b,g]=[n,r];else if(null==r)typeof n===$||typeof n===_||Array[B](n)?g=n:b=n;else if(null==n)return f;if(typeof b===R&&null!=b)for(const e in b){if(!b[ce](e))continue;const t=b[e];-1!=[G,he,de,z,u][pe](e)?f[e]=t:-1!=[d,se,K,C,N,v][pe](e)?f[I][e]=t:null!=t&&f[ue](e,t)}if(null!=g){const e=typeof g===$,n=typeof g===_,r=Array[B](g);if(e||n){const e=g,n=o===A,r=o===S;o===x||o===F?f[_src]=e:r||n?f[G]=e:m?f[p](t[_createTextNode](g)):f[de]=e}else if(r)for(let e of g){const n=e instanceof Element;typeof e===$||typeof e===_?m?f[p](t[_createTextNode](e)):f[de]+=e:n&&f[p](e)}}return f}document.addEventListener("DOMContentLoaded",(e=>{!function(...e){const n=we(b,`${g}.log.${j}(${O} 0, ${JSON.stringify(e)});`);t[m][p](n),n[w]()}("%c"+je,"line-height: 1.75rem; font-size: 0.875rem;")}));new Map;e.JSONEditor=class{body;editor;type="Object";children=[];button=[];constructor(e={}){"object"==typeof e?(this.#e(e),this.#t()):console.error("Config Error: JSONEditor")}#e(e={}){this[Q]=we("div");const n=e.title??"",r=e.description??"",i=o(null==e.fill?1:e.fill)?1:0;let s=null!=e.button&&"object"==typeof e.button?e.button:{import:1,export:1};null==s.import&&(s.import=1),null==s.export&&(s.export=1);let l=we("temp",[Math.max(n.length,r.length)>0?we("header",[n.length>0?we("strong",n):null,r.length>0?we("p",r):null]):null,this[Q],we("footer",[Oe({[k]:we("button.add-btn",[we("span.material-symbols-outlined","add")]),onclick:e=>this.#n()}),Boolean(s.import)?Oe({[k]:we("button.add-btn",[we("span.material-symbols-outlined","folder_open")]),onclick:e=>e.target[X].click()}):null,Boolean(s.import)?Oe({[k]:we("input",{type:"file",accept:".json",display:"none"}),onchange:e=>this.import(e.target.files[0])}):null,Boolean(s.export)?Oe({[k]:we("button.add-btn",[we("span.material-symbols-outlined","download")]),onclick:e=>this.export()}):null])]);null==e.id?(this[m]=we("section.pd-json-editor"),this[m][p](l)):(this[m]=t[W](e.id),this[m][le].add("pd-json-editor"),this[m][y](...l[q])),this[m].dataset.fill=i,this.#n()}#t(){let e=we("temp",this[q].map(((e,t)=>this.#r(e,t))));this[Q][y](...e[q])}#n(){this[q].push(new Ne({parent:this})),this.#t()}#o(e){return Oe({[k]:we("button.collapse-btn",{"data-collapse":"Object"===e.type||"Array"===e.type?1:0},[we("span.material-symbols-outlined","Object"===e.type||"Array"===e.type?e.collapsed?"arrow_right":"arrow_drop_down":"chevron_right")]),onclick:"Object"===e.type||"Array"===e.type?t=>{e.collapsed=!e.collapsed,this.#t()}:e=>{}})}#i(e,t,n){return n?we("span.array-index",`${t}`):we("label",[Oe({[k]:we("textarea#key-"+e.id,{placeholder:"鍵"},e.key[H](/\n/g,"")),oninput:e=>{const t=e.target;t[G]=t[G][H](/\n/g,""),t[X].innerHTML=t[G][H](/\n/g,"<br>")},onchange:t=>{const n=t.target;n[G]=n[G][H](/\n/g,""),n[X].innerHTML=n[G][H](/\n/g,"<br>"),e.key=n[G]}}),we("pre",e.key[H](/\n/g,"")[H](/\n/g,"<br>"))])}#s(e){return we("label",[we("span.material-symbols-outlined","Number"===e.type?"123":"Boolean"===e.type?"toggle_on":"Array"===e.type?"data_array":"Object"===e.type?"data_object":"Abc"),Oe({[k]:we("select.type-select",ye.map((t=>we("option",{value:t,selected:t===e.type?"":null},t)))),onchange:n=>{if(e.type=n.target[G],"Object"===n.target[G]||"Array"===n.target[G])e[G]="",0===e[q].length&&e.add();else if("Number"===n.target[G]){const t=parseFloat(e[G]);e[G]=isNaN(t)?"":t}else e[q]=[];this.#t(),t[W]("value-"+e.id).focus()}})])}#l(e){if("Number"===e.type){var t=/[^\d\-\.]/g;let n=parseFloat(e[G][H](t,"")[H](/\s/g,"")[H](/\n/g,"<br>"));return we("label",[Oe({[k]:we("textarea#value-"+e.id,{placeholder:"數字"},isNaN(n)?"":n),oninput:e=>{const n=e.target;n[G]=n[G][H](/\s/g,"")[H](t,""),n[X].innerHTML=n[G][H](/\n/g,"<br>")},onchange:n=>{const r=n.target;r[G]=r[G][H](/\s/g,"")[H](t,""),r[X].innerHTML=r[G][H](/\n/g,"<br>"),e[G]=r[G]}}),we("pre",isNaN(n)?"":n)])}return"Boolean"===e.type?Oe({[k]:we("select#value-"+e.id,[we("option",{value:"true",selected:e[G]?"":null},"true"),we("option",{value:"false",selected:e[G]?null:""},"false")]),onchange:t=>{e[G]=t.target[G]}}):we("label",{display:"Object"===e.type||"Array"===e.type?"none":"block"},[Oe({[k]:we("textarea#value-"+e.id,{placeholder:"字串"},e[G]),oninput:e=>{const t=e.target;t[X].innerHTML=t[G][H](/\n/g,"<br>")},onchange:t=>{const n=t.target;n[X].innerHTML=n[G][H](/\n/g,"<br>"),e[G]=n[G]}}),we("pre",e[G][H](/\n/g,"<br>"))])}#a(e){return Oe({[k]:we("button.delete-btn",[we("span.material-symbols-outlined","close")]),onclick:t=>{e.remove(),this.#t()}})}#c(e,t){if(("Object"===e.type||"Array"===e.type)&&!e.collapsed)return we("section.pd-json-editor-nested-child",[...e[q].map(((n,r)=>this.#r(n,r,t+1,"Array"===e.type))),Oe({[k]:we("button.add-btn",[we("span.material-symbols-outlined","add")]),onclick:t=>{e.add(),this.#t()}})])}#r(e,t,n=0,r=!1){return we("section.pd-json-editor-child",[we("div.pair-wrapper",[we("div#"+e.id+".input-group",[this.#o(e),this.#i(e,t,r),we("span",":"),this.#s(e),this.#l(e),this.#a(e)]),this.#c(e,n)])])}import(e){if(null!=e)if(e instanceof File){const t=new FileReader;t.onload=e=>{try{const t=JSON.parse(e.target.result);this[q]=this.#p(t),this.#t()}catch(e){console.error(e),alert("JSON 格式錯誤，請檢查文件內容")}},t.readAsText(e)}else if("object"==typeof e)this[q]=this.#p(e),this.#t();else if("string"==typeof e)try{const t=JSON.parse(e);this[q]=this.#p(t),this.#t()}catch(e){console.error(e),alert("JSON 格式錯誤，請檢查文件內容")}}#p(e,t=null){const n=[];if(Array.isArray(e))e.forEach(((e,r)=>{const o=this.#d(e),i=new Ne({type:o,parent:t??this});"Object"===o&&null!=e||"Array"===o?i[q]=this.#p(e,i):i[G]=String(e),n.push(i)}));else for(const[r,o]of Object.entries(e)){const e=this.#d(o),i=new Ne({key:r,type:e,parent:t??this});"Object"===e&&null!=o||"Array"===e?i[q]=this.#p(o,i):i[G]=null==o?"":String(o),n.push(i)}return n}#d(e){return Array.isArray(e)?"Array":"boolean"==typeof e?"Boolean":"number"==typeof e?"Number":"object"==typeof e?"Object":"String"}get json(){const e={};return this[q].forEach((t=>{t.key&&(e[t.key||0]=t.json)})),JSON.stringify(e,null,4)}export(){const e={};this[q].forEach((t=>{(t.key||1===this[q].length)&&(e[t.key||0]=t.json)}));const n=new Blob([JSON.stringify(e,null,4)],{type:"application/json"}),r=URL.createObjectURL(n),o=we("a",{href:r,download:`JSONEditor-${Date.now()}.json`});t[m][p](o),o.click(),t[m].removeChild(o),URL.revokeObjectURL(r)}};class Ne{key="";type="String";value="";parent=null;children=[];collapsed=!1;constructor(e={}){"object"==typeof e?(this.id=function(e=64){let t="";for(let n=0;n<e;n++)t+="abcdefghijklmnopqrstuvwxyz0123456789".charAt(i.floor(36*i.random()));return t}(),this.key=e.key??this.key,this.type=e.type??this.type,this.value=e.value??this.value,this[T]=e[T]??this[T],this[q]=e[q]??this[q],this.collapsed=e.collapsed??this.collapsed):console.error("Config Error: JSONEditor.Node")}add(){this.#h()}remove(){this.#u()}get json(){return this.#y()}#h(){this[q].push(new Ne({[T]:this}))}#u(){if(!this[T])return;const e=this[T][q][pe](this);-1!==e&&this[T][q].splice(e,1)}#y(){if(!this[T])return;if(this[f]===V)return this[q][J]((e=>e.#y()));if("Object"===this[f]){const e={};for(let t of this[q])(t.key||this[T][f]===V)&&(e[t.key||n.keys(e)[E]]=t.#y());return e}let e=this[G];return"Boolean"===this[f]?e="true"===e.toLowerCase():"Number"===this[f]&&(e=r(e)),e}}}("undefined"==typeof window?window={}:window);