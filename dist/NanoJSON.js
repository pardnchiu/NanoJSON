!function(){const e=window,t=document,r=Object,n=Number,i=Boolean,o=(DocumentFragment,Math),s=Date,l=setTimeout,a=/\.([\w_-]+)?/gi,c=/\#([\w_-]+)?/i,h=/^\w+(?=[\#\.]*)/i,d="add",p="appendChild",u="color",f="createDocumentFragment",y="contentEditable",b="replaceChildren",v="type",g="body",w="now",m="display",A="float",k="dom",j="input",C="textarea",x="height",H="img",O="parent",N="inner",z="isArray",S="length",T="map",M="match",V="number",L="object",B="replace",F="source",E="style",J="string",D="temp",R="test",U="textContent",_="trim",I="value",P="width",$="Array",q="children",G="editor",K="getElementById",Q="nextElementSibling",W="link",X="rel",Y="href",Z="as",ee="backgroundColor",te="classList",re="createElement",ne="hasOwnProperty",ie="indexOf",oe=N+"HTML",se=N+"Text",le="setAttribute",ae=["String","Array","Boolean","Number","Object"],ce="https://cdn.jsdelivr.net/npm/@pardnchiu/nanojson@0.2.0/dist/NanoJSON.css",he="NanoJSON\nGitHub: https://github.com/pardnchiu/NanoJSON\nCreator: Pardn Chiu\nLicense: Proprietary",de={beforeRender:"beforeRender",beforeUpdate:"beforeUpdate",beforeDestroy:"beforeDestroy",rendered:"rendered",updated:"updated",destroyed:"destroyed"};for(let e of[ye(W,{[X]:"preconnect",[Y]:"https://cdn.jsdelivr.net"}),ye(W,{[X]:"preload",[Y]:ce,[Z]:E}),ye(W,{[X]:"stylesheet",[Y]:ce})])t.head[p](e);document.addEventListener("DOMContentLoaded",(e=>{me("%c"+he,"line-height: 1.75rem; font-size: 0.875rem;")}));const pe={number:'<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M5.5 15v-4.5H4V9h3v6H5.5zM9 15v-2.5c0-.283.096-.52.287-.713A.967.967 0 0110 11.5h2v-1H9V9h3.5c.283 0 .52.096.713.287.191.192.287.43.287.713v1.5c0 .283-.096.52-.287.713a.968.968 0 01-.713.287h-2v1h3V15H9zm6 0v-1.5h3v-1h-2v-1h2v-1h-3V9h3.5c.283 0 .52.096.712.287.192.192.288.43.288.713v4c0 .283-.096.52-.288.713A.968.968 0 0118.5 15H15z" fill="#5F6368"/></svg>',string:'<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17 15a.968.968 0 01-.712-.287A.968.968 0 0116 14v-4c0-.283.096-.52.288-.713A.968.968 0 0117 9h3c.283 0 .52.096.712.287.192.192.288.43.288.713v1h-1.5v-.5h-2v3h2V13H21v1c0 .283-.096.52-.288.713A.968.968 0 0120 15h-3zm-7.5 0V9h4c.283 0 .52.096.713.287.191.192.287.43.287.713v1c0 .283-.096.52-.287.713A.968.968 0 0113.5 12c.283 0 .52.096.713.287.191.192.287.43.287.713v1c0 .283-.096.52-.287.713A.968.968 0 0113.5 15h-4zm1.5-3.75h2v-.75h-2v.75zm0 2.25h2v-.75h-2v.75zM3 15v-5c0-.283.096-.52.288-.713A.968.968 0 014 9h3c.283 0 .52.096.713.287.191.192.287.43.287.713v5H6.5v-1.5h-2V15H3zm1.5-3h2v-1.5h-2V12z" fill="#5F6368"/></svg>',object:'<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13.5 18v-1.5h2.25c.213 0 .39-.072.534-.216a.726.726 0 00.216-.534v-1.5c0-.475.137-.906.413-1.294A2.233 2.233 0 0118 12.131v-.262a2.233 2.233 0 01-1.087-.825A2.184 2.184 0 0116.5 9.75v-1.5a.726.726 0 00-.216-.534.726.726 0 00-.534-.216H13.5V6h2.25a2.17 2.17 0 011.594.656c.437.438.656.969.656 1.594v1.5c0 .213.072.39.216.534a.726.726 0 00.534.216h.75v3h-.75a.726.726 0 00-.534.216.726.726 0 00-.216.534v1.5a2.17 2.17 0 01-.656 1.594A2.17 2.17 0 0115.75 18H13.5zm-5.25 0a2.17 2.17 0 01-1.594-.656A2.17 2.17 0 016 15.75v-1.5a.726.726 0 00-.216-.534.726.726 0 00-.534-.216H4.5v-3h.75c.213 0 .39-.072.534-.216A.726.726 0 006 9.75v-1.5c0-.625.219-1.156.656-1.594A2.17 2.17 0 018.25 6h2.25v1.5H8.25a.726.726 0 00-.534.216.726.726 0 00-.216.534v1.5c0 .475-.138.906-.412 1.294A2.233 2.233 0 016 11.869v.262c.45.163.813.438 1.088.825.274.388.412.819.412 1.294v1.5c0 .213.072.39.216.534a.726.726 0 00.534.216h2.25V18H8.25z" fill="#5F6368"/></svg>',array:'<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M14.625 19v-1.75h2.625V6.75h-2.625V5H19v14h-4.375zM5 19V5h4.375v1.75H6.75v10.5h2.625V19H5z" fill="#5F6368"/></svg>',boolean:'<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M7.91 16.818c-1.365 0-2.524-.477-3.478-1.432C3.477 14.432 3 13.273 3 11.91c0-1.364.477-2.523 1.432-3.477C5.386 7.477 6.545 7 7.909 7h8.182c1.363 0 2.523.477 3.477 1.432.955.954 1.432 2.114 1.432 3.477 0 1.364-.477 2.523-1.432 3.477-.954.955-2.114 1.432-3.477 1.432H7.909zm0-1.636h8.18c.9 0 1.671-.32 2.312-.962.641-.64.962-1.41.962-2.31 0-.9-.32-1.671-.962-2.312a3.151 3.151 0 00-2.311-.962H7.909c-.9 0-1.67.32-2.311.962a3.151 3.151 0 00-.962 2.311c0 .9.32 1.67.962 2.311.64.641 1.411.962 2.311.962zm8.18-.818c.683 0 1.262-.239 1.74-.716a2.367 2.367 0 00.716-1.739c0-.682-.24-1.261-.716-1.739a2.367 2.367 0 00-1.74-.715c-.68 0-1.26.238-1.738.716a2.367 2.367 0 00-.716 1.738c0 .682.239 1.261.716 1.739a2.367 2.367 0 001.739.716z" fill="#5F6368"/></svg>',right:'<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M10 18V6l6 6-6 6z" fill="#5F6368"/></svg>',folder:'<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 20c-.55 0-1.02-.196-1.413-.587A1.926 1.926 0 012 18V6c0-.55.196-1.02.587-1.412A1.926 1.926 0 014 4h6l2 2h8c.55 0 1.02.196 1.413.588.391.391.587.862.587 1.412H11.175l-2-2H4v12l2.4-8h17.1l-2.575 8.575a1.95 1.95 0 01-.738 1.038A1.985 1.985 0 0119 20H4zm2.1-2H19l1.8-6H7.9l-1.8 6z" fill="#5F6368"/></svg>',add:'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><path d="M11 13H5v-2h6V5h2v6h6v2h-6v6h-2v-6z" fill="#5F6368"/></svg>',download:'<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 16l-5-5 1.4-1.45 2.6 2.6V4h2v8.15l2.6-2.6L17 11l-5 5zm-6 4c-.55 0-1.02-.196-1.412-.587A1.926 1.926 0 014 18v-3h2v3h12v-3h2v3c0 .55-.196 1.02-.587 1.413A1.926 1.926 0 0118 20H6z" fill="#5F6368"/></svg>',clear:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M17.25 18H22v2h-6.75l2-2zm-12.5 2l-2.125-2.125c-.383-.383-.58-.858-.587-1.425-.009-.567.179-1.05.562-1.45l11-11.4c.383-.4.854-.6 1.412-.6.559 0 1.03.192 1.413.575L21.4 8.55c.383.383.575.858.575 1.425 0 .567-.192 1.042-.575 1.425L13 20H4.75zm7.4-2L20 9.95 15.05 5 4 16.4 5.6 18h6.55z" fill="#5F6368"/></svg>'};function ue(e={}){let t;if("object"==typeof e&&e[ne]("dom")){t=e.dom;for(let r of Object.keys(e))"dom"!==r&&(t[r]=t=>e[r](t));return t}}function fe(e,t){return ue({[k]:ye("button",{"data-collapseable":"Object"===e.type||"Array"===e.type?1:0,"data-collapsed":e.collapsed?1:0},["Object"===e.type||"Array"===e.type?pe.right:null]),onclick:"Object"===e.type||"Array"===e.type?r=>{e.collapsed=!e.collapsed,t.render()}:e=>{}})}function ye(e="",r,n){const i=((e[M](h)||[])[0]||"")[_](),o=((e[M](c)||[])[1]||"")[_](),s=(a[R](e)?e[M](a):[])[T]((e=>e[B](/^\./,"")));if(i[S]<1)return;let l,b,v,g=!1;if(e===D?(g=!0,l=t[f]()):l=t[re](i),95!=he[S])return l;o[S]&&(l.id=o);for(let e of s)l[te][d](e);if(null==r&&null!=n&&([r,n]=[n,null]),null!=r&&null!=n)[b,v]=[r,n];else if(null==n)typeof r===J||typeof r===V||Array[z](r)?v=r:b=r;else if(null==r)return l;if(typeof b===L&&null!=b)for(const e in b){if(!b[ne](e))continue;const t=b[e];-1!=[I,se,oe,U,y][ie](e)?l[e]=t:-1!=[u,ee,P,x,m,A][ie](e)?l[E][e]=t:null!=t&&l[le](e,t)}if(null!=v){const e=typeof v===J,r=typeof v===V,n=Array[z](v);if(e||r){const e=v,r=i===j,n=i===C;i===H||i===F?l[_src]=e:n||r?l[I]=e:g?l[p](t[_createTextNode](v)):l[oe]=e}else if(n)for(let e of v){const r=e instanceof Element;typeof e===J||typeof e===V?g?l[p](t[_createTextNode](e)):l[oe]+=e:r&&l[p](e)}}return l}function be(e,t,r,n){return r?ye("span.array-index",`${t}`):ye("label",[ue({[k]:ye("textarea#key-"+e.id,{placeholder:"鍵"},e.key[B](/\n/g,"")),oninput:t=>{const r=t.target;r[I]=r[I][B](/\n/g,""),r[Q].innerHTML=r[I][B](/\n/g,"<br>"),e.key=r[I],n?.update((()=>{}))},onchange:t=>{const r=t.target;r[I]=r[I][B](/\n/g,""),r[Q].innerHTML=r[I][B](/\n/g,"<br>"),e.key=r[I]}}),ye("pre",e.key[B](/\n/g,"")[B](/\n/g,"<br>"))])}function ve(e,t){return ue({[k]:ye("button.delete-btn",[pe.add]),onclick:r=>{e.remove(),t.render(!0)}})}function ge(e,r){return ye("label",["Number"===e.type?pe.number:"Boolean"===e.type?pe.boolean:"Array"===e.type?pe.array:"Object"===e.type?pe.object:pe.string,ue({[k]:ye("select.type-select",ae.map((t=>ye("option",{value:t,selected:t===e.type?"":null},t)))),onchange:n=>{if(e.type=n.target[I],"Object"===n.target[I]||"Array"===n.target[I])e[I]="",0===e[q][S]&&e.add();else if("Number"===n.target[I]){const t=parseFloat(e[I]);e[I]=isNaN(t)?"":t}else e[I]="",e[q]=[];r.render(!0),t[K]("value-"+e.id).focus()}})])}function we(e,t){if("Number"===e.type){var r=/[^\d\-\.]/g;let n=parseFloat(e[I]);return ye("label",[ue({[k]:ye("textarea#value-"+e.id,{placeholder:"數字"},isNaN(n)?"":n),oninput:n=>{const i=n.target;i[I]=i[I][B](/\s/g,"")[B](r,""),i[Q].innerHTML=i[I][B](/\n/g,"<br>"),e[I]=i[I],t.update((()=>{}))},onchange:t=>{const n=t.target;n[I]=n[I][B](/\s/g,"")[B](r,""),n[Q].innerHTML=n[I][B](/\n/g,"<br>"),e[I]=n[I]}}),ye("pre",isNaN(n)?"":n)])}return"Boolean"===e.type?ue({[k]:ye("select#value-"+e.id,[ye("option",{value:"true",selected:e[I]?"":null},"true"),ye("option",{value:"false",selected:e[I]?null:""},"false")]),onchange:r=>{e[I]=r.target[I],t.update((()=>{}))}}):ye("label",{display:"Object"===e.type||"Array"===e.type?"none":"block"},[ue({[k]:ye("textarea#value-"+e.id,{placeholder:"字串"},e[I]),oninput:r=>{const n=r.target;n[Q].innerHTML=n[I][B](/\n/g,"<br>"),e[I]=n[I],t.update((()=>{}))},onchange:t=>{const r=t.target;r[Q].innerHTML=r[I][B](/\n/g,"<br>"),e[I]=r[I]}}),ye("pre",e[I][B](/\n/g,"<br>"))])}function me(...e){const r=ye("script",`console.log.apply(void 0, ${JSON.stringify(e)});`);t[g][p](r),r.remove()}new Map;e.JSONEditor=class{children=[];body;editor;button=[];#e;#t=!1;#r="Object";get type(){return this.#r}constructor(e={}){"object"==typeof e?this.#n(e):console.error("Config Error: JSONEditor")}#n(e={}){this[G]=ye("section");const r=e.when??{},n=e.title??"",o=e.description??"",s=i(null==e.fill?1:e.fill)?1:0;let l=null!=e.button&&"object"==typeof e.button?e.button:{import:1,export:1};l.reset=l.reset??1,l.import=l.import??1,l.export=l.export??1,this.#e=new ke({before_render:r[de.beforeRender],rendered:r[de.rendered],before_update:r[de.beforeUpdate],updated:r[de.updated],before_destroy:r[de.beforeDestroy],destroyed:r[de.destroyed]});let a=ye("temp",[Math.max(n[S],o[S])>0?ye("header",[n[S]>0?ye("strong",n):null,o[S]>0?ye("p",o):null]):null,this[G],ye("footer",[ue({[k]:ye("button",{title:"新增"},[pe.add]),onclick:e=>this.insert()}),i(l.import)?ue({[k]:ye("button",{title:"插入"},[pe.folder]),onclick:e=>e.target[Q].click()}):null,i(l.import)?ue({[k]:ye("input",{type:"file",accept:".json",display:"none"}),onchange:e=>this.import(e.target.files[0])}):null,i(l.export)?ue({[k]:ye("button",{title:"下載"},[pe.download]),onclick:e=>this.export()}):null,i(l.reset)?ue({[k]:ye("button",{title:"清空"},[pe.clear]),onclick:e=>this.import({})}):null])]);null==e.id?(this[g]=ye("section.pd-json-editor"),this[g][p](a)):(this[g]=t[K](e.id),this[g][te].add("pd-json-editor"),this[g][b](...a[q])),this[g].dataset.fill=s,this.insert(),this.#e.render((async()=>{this.render(),this.#t=!0}))}#i(e,t){if(("Object"===e.type||"Array"===e.type)&&!e.collapsed)return ye("section.pd-json-editor-nested-child",[...e[q].map(((r,n)=>{let i=this.#o(r,n,t+1,"Array"===e.type);return i.dataset.last=n===e[q][S]-1?1:0,i})),ue({[k]:ye("button",[pe.add]),onclick:t=>{e.add(),this.render()}})])}#o(e,t,r=0,n=!1){return ye("section.pd-json-editor-child",[ye("section.pair-wrapper",[ye("section#"+e.id+".input-group",[fe(e,this),be(e,t,n,this.#e),ye("span",":"),ge(e,this),we(e,this.#e),ve(e,this)]),this.#i(e,r)])])}#s(e,t=null){const r=[];if(Array.isArray(e))e.forEach(((e,n)=>{const i=this.#l(e),o=new Ae({type:i,parent:t??this});"Object"===i&&null!=e||"Array"===i?o[q]=this.#s(e,o):o[I]=String(e),r.push(o)}));else for(const[n,i]of Object.entries(e)){const e=this.#l(i),o=new Ae({key:n,type:e,parent:t??this});"Object"===e&&null!=i||"Array"===e?o[q]=this.#s(i,o):o[I]=null==i?"":String(i),r.push(o)}return r}#l(e){return Array.isArray(e)?"Array":"boolean"==typeof e?"Boolean":"number"==typeof e?"Number":"object"==typeof e?"Object":"String"}render(e=!1){let t=ye("temp",this[q].map(((e,t)=>this.#o(e,t))));this[G][b](...t[q]),this.#t&&e&&this.#e?.update((()=>{}))}insert(){this[q].push(new Ae({parent:this})),this.render()}get json(){const e={};return this[q].forEach((t=>{t.key&&(e[t.key||0]=t.json)})),JSON.stringify(e,null,4)}import(e){if(null!=e)if(e instanceof File){const t=new FileReader;t.onload=e=>{try{const t=JSON.parse(e.target.result);this[q]=this.#s(t),this.render(!0)}catch(e){console.error(e),alert("JSON 格式錯誤，請檢查文件內容")}},t.readAsText(e)}else if("object"==typeof e)this[q]=this.#s(e),this.render(!0);else if("string"==typeof e)try{const t=JSON.parse(e);this[q]=this.#s(t),this.render(!0)}catch(e){console.error(e),alert("JSON 格式錯誤，請檢查文件內容")}}reset(){this.import({})}export(){const e={};this[q].forEach((t=>{(t.key||1===this[q][S])&&(e[t.key||0]=t.json)}));const r=new Blob([JSON.stringify(e,null,4)],{type:"application/json"}),n=URL.createObjectURL(r),i=ye("a",{href:n,download:`JSONEditor-${Date.now()}.json`});t[g][p](i),i.click(),t[g].removeChild(i),URL.revokeObjectURL(n)}};class Ae{key="";type="String";value="";parent=null;children=[];collapsed=!1;constructor(e={}){"object"==typeof e?(this.id=function(e=64){let t="";for(let r=0;r<e;r++)t+="abcdefghijklmnopqrstuvwxyz0123456789".charAt(o.floor(36*o.random()));return t}(),this.key=e.key??this.key,this.type=e.type??this.type,this.value=e.value??this.value,this[O]=e[O]??this[O],this[q]=e[q]??this[q],this.collapsed=e.collapsed??this.collapsed):console.error("Config Error: JSONEditor.Node")}add(){this.#a()}remove(){this.#c()}get json(){return this.#h()}#a(){this[q].push(new Ae({[O]:this}))}#c(){if(!this[O])return;const e=this[O][q][ie](this);-1!==e&&this[O][q].splice(e,1)}#h(){if(!this[O])return;if(this[v]===$)return this[q][T]((e=>e.#h()));if("Object"===this[v]){const e={};for(let t of this[q])(t.key||this[O][v]===$)&&(e[t.key||r.keys(e)[S]]=t.#h());return e}let e=this[I];return"Boolean"===this[v]?e="true"===e.toLowerCase():"Number"===this[v]&&(e=n(e)),e}}class ke{#d;#p;#u;#f;#y;#b;#v;#g;#w;constructor(e={}){this.#d=e[de.before_render]||void 0,this.#p=e[de.rendered]||void 0,this.#u=e[de.before_update]||void 0,this.#f=e[de.updated]||void 0,this.#y=e[de.before_destroy]||void 0,this.#b=e[de.destroyed]||void 0}async#m(e){return new $Promise(((t,r)=>{t(!1!==e())}))}#A(e){e(!1)}async render(e){this.#v=s.now(),null!=this.#d&&!1===await this.#m(this.#d)||(await e(),this.#g=s[w]()-this.#v,me("log","渲染耗時:",this.#g/1e3),null!=this.#p&&this.#A(this.#p))}async update(e){clearTimeout(this.#w),this.#w=l((async()=>{this.#v=s.now(),null!=this.#u&&!1===await this.#m(this.#u)||(await e(),this.#g=s[w]()-this.#v,me("log","更新耗時:",this.#g/1e3),null!=this.#f&&this.#A(this.#f))}),300)}async destroy(e){this.#v=s.now(),null!=this.#y&&!1===await this.#m(this.#y)||(await e(),this.#g=s[w]()-this.#v,me("log","銷毀耗時:",this.#g/1e3),null!=this.#b&&this.#A(this.#b))}}}("undefined"==typeof window?window={}:window);